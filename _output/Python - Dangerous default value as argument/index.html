
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Satran&#39;s Digital Garden</title>
    <link rel="shortcut icon" href="/favicon.png" />
    <link rel="stylesheet" href="/base.css"/>
  </head>
  <body>
    <nav class="main">
      <li class="site-title"><a href="/">Satran&#39;s Digital Garden</a></li>
      <li><a href="/Blog">Blog</a></li><li><a href="/Tags">Tags</a></li><li><a href="/Books">Books</a></li><li><a href="https://twitter.com/sat_ran">Twitter</a></li>
    </nav>

<div class="wrapper">
  <article>
    <section class="content">
      
      <h1 class="title">Python - Dangerous default value as argument</h1>
      
      <p>Pylint in my vim constantly showed this error:</p>
<pre><code> warning| Dangerous default value [] as argument
</code></pre>
<p>This usually happened when I used an empty list <code>[ ]</code> or empty dict <code>{ }</code> as an argument in a function. I always wondered why this should raise a warning. I got my answer in <a href="http://stackoverflow.com/questions/101268/hidden-features-of-python#113198">stackoverflow</a>.</p>
<p>Take this code for example:</p>
<pre><code>&gt;&gt;&gt; def foo(x=[]):
...     x.append(1)
...     print x
... 
&gt;&gt;&gt; foo()
[1]
&gt;&gt;&gt; foo()
[1, 1]
&gt;&gt;&gt; foo()
[1, 1, 1]
</code></pre>
<p>As you can see the default value of x changes. A commenter <a href="http://stackoverflow.com/users/149076/jim-dennis">Jim Dennis</a> explained it pretty well. To quote him:</p>
<blockquote>
<p>As the def statement is executed its arguments are evaluated by the interpreter. This creates (or rebinds) a name to a code object (the suite of the function). However, the default arguments are instantiated as objects at the time of definition. This is true of any time of defaulted object, but only significant (exposing visible semantics) when the object is mutable. There's no way of re-binding that default argument name in the function's closure although it can obviously be over-ridden for any call or the whole function can be re-defined).</p>
</blockquote>
<p>The author <a href="http://stackoverflow.com/users/2147/jason-baker">Jason Baker</a> suggested not using <code>[ ]</code> but rather:</p>
<pre><code>&gt;&gt;&gt; def foo(x=None):
...     if x is None:
...         x = []
...     x.append(1)
...     print x
&gt;&gt;&gt; foo()
[1]
&gt;&gt;&gt; foo()
[1]
</code></pre>

    </section>

    
    <section class="side">
      <div class="meta">
	
	<p class="date">Created on Jan 12 2012</p>
	
	
	<ul class="tags">
	  
	  <li><a href="/Blog">Blog</a></li>
	  
	</ul>
	
      </div>
      

    </section>
    
  </article>
</div>

<div class="footer">
  <div class="about">
    <nav>
      <li><a href="/Blog">Blog</a></li><li><a href="/Tags">Tags</a></li><li><a href="/Books">Books</a></li><li><a href="https://twitter.com/sat_ran">Twitter</a></li>
    </nav>
    
    <div><p>Hi, I'm Satyajit Ranjeev. I'm an Engineering Leader at Solarisbank.
I'm <a href="https://twitter.com/sat_ran">@sat_ran</a> on Twitter. Follow me for more such content.</p>
</div>
    
  </div>
  <div class="license">
    
    <p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png"></a><br><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">The website's theme, articles, images and all other content are licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a></p>

    
  </div>
</div>
</body>
</html>

